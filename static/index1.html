<html>
  <head>
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <script src="https://d3js.org/topojson.v2.min.js"></script>
    <style></style>
  </head>
  <body>
    <h3>Category</h3>
    <input type="range" id="category" min="0" max="5" step="1" />
    <h3>Neighborhood</h3>
    <input type="range" id="neighborhood" min="0" max="5" step="1" />
    <h3>Rating</h3>
    <input type="range" id="rating" min="0" max="5" step="1" />
    <div id="neigh-buttons"></div>
    <div id="cat-buttons"></div>
    <div id="rat-buttons"></div>
  </body>
  <script>
    const requestData = async function () {
      const restaurants = await d3.csv("yelp_boston.csv", d3.autoType);
      var neighborhoodExtent = d3.extent(restaurants, (d) => d["neighborhood"]);
      console.log(neighborhoodExtent);
      var neighborhoodlist = d3.map(restaurants, (d) => d["neighborhood"]);
      var categorylist = d3.map(restaurants, (d) => d["categories"]);
      console.log(categorylist);
      var ratinglist = d3.map(restaurants, (d) => d["rating"]);
      // currfilter dictionary of arrays, and then append on select
      // buttons
      function createFilters() {
        // neighbors
        neighbor_div = d3.select("div#neigh-buttons");
        neighborhoodlist.forEach((d) => {
          neighbor_div
            .append("button")
            .text(d)
            .on("click", function () {
              // diffButtonClicked(d, d3.select(this));
            });
        });
        // category
        category_div = d3.select("div#cat-buttons");
        categorylist.forEach((d) => {
          category_div.append("button").on("click", function () {
            // if (currFilter === "") {
            //   return;
            // }
            // currFilter = "";
            // currFilterElt.style("background-color", "");
            // currFilterElt.style("color", "");
            // currFilterElt = null;
            // filtered_data = filterDifficulty(currFilter, [...wordles]);
          });
        });
        // rating list
        rating_div = d3.select("div#rat-buttons");
        ratinglist.forEach((d) => {
          rating_div
            .append("button")
            .text(d)
            .on("click", function () {
              // diffButtonClicked(d, d3.select(this));
            });
        });
      }
      // sliders
      var new_category = 0;
      var new_neighborhood = 0;
      var new_rating = 0;
      d3.select("#category").on("input", function () {
        new_category = d3.select(this).property("value");
      });
      d3.select("#neighborhood").on("input", function () {
        new_neighborhood = d3.select(this).property("value");
      });
      d3.select("#rating").on("input", function () {
        new_rating = d3.select(this).property("value");
      });
      // neighborhood binary, rating convert,
      function calculate() {
        var final =
          parseInt(neighborhood) + parseInt(rating) + parseInt(category);
        console.log(final);
      }
      createFilters();
    };
    requestData();
  </script>
</html>
